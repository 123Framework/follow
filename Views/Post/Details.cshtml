@using TweeterApp.Repository
@model TweeterApp.Models.ViewModels.PostDetailsViewModel

<h2>@Model.Post.Title</h2>
<p>@Model.Post.Content</p>
<h3>Comments</h3>
<p><strong>Author: </strong>@Model.Post.User.UserName</p>

@await Html.PartialAsync("_CommentsPartial", Model.Comments)

@foreach (var comment in await CommentRepository.GetCommentsForPostAsync(Model.Id,_userRepository.GetCurrentUserId())){
    @await Html.PartialAsync("_Comment", comment)
 }   


<!--РЕАлизовать просмотр и доабвение комментариев-->
<form asp-controller="Comment" asp-action="Add" method="post">
    <input type="hidden" name="postId" value="@Model.Post.Id"/>
    <textarea name="content" placeholder="Add a comment.." required></textarea>
    <button type="submit">Comment</button>
</form>
